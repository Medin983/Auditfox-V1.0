<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DSGVO‑Audit in 60 Sekunden | auditfox.de</title>
    <meta
      name="description"
      content="Kostenloser DSGVO‑Quick‑Scan Ihrer Website. In 60 Sekunden erhalten Sie einen PDF‑Bericht mit konkreten Handlungsempfehlungen."
    />
    <meta property="og:title" content="DSGVO‑Audit in 60 Sekunden" />
    <meta
      property="og:description"
      content="Prüfen Sie jetzt kostenlos, ob Ihre Website DSGVO‑konform ist. PDF‑Bericht in nur einer Minute!"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://auditfox.de" />

    <!-- Tailwind v3 CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js (FAQ‑Accordion) -->
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <!-- Lucide‑Icons für statische SVG‑Icons -->
    <script
      defer
      src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"
    ></script>
  </head>

  <body class="bg-white text-gray-800">
    <!-- Header -->
    <header
      class="bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-16 text-center"
    >
      <h1 class="mb-4 text-4xl font-bold sm:text-5xl">
        Ist Ihre Website DSGVO‑konform?
      </h1>
      <p class="mb-10 text-xl text-gray-600 sm:text-2xl">
        Kostenlos scannen – PDF‑Bericht in 60 Sekunden
      </p>

      <div
        class="mx-auto max-w-2xl rounded-lg bg-white p-8 shadow-xl ring-1 ring-gray-100"
      >
        <div class="flex flex-col gap-4 sm:flex-row">
          <input
            id="urlInput"
            type="url"
            placeholder="https://ihre‑website.de"
            class="flex-1 rounded border-2 border-gray-300 px-4 text-lg leading-tight focus:border-blue-600 focus:outline-none"
          />
          <button
            id="startAudit"
            class="relative flex items-center justify-center rounded bg-blue-800 px-8 py-3 text-lg font-semibold text-white transition-colors hover:bg-blue-900 disabled:cursor-not-allowed disabled:opacity-70"
          >
            <span id="startText" class="flex items-center gap-2">
              <i data-lucide="search" class="h-5 w-5"></i>
              Jetzt Audit starten
            </span>

            <!-- Spinner -->
            <svg
              id="spinner"
              class="absolute hidden h-5 w-5 animate-spin text-white"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
                fill="none"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
              ></path>
            </svg>
          </button>
        </div>

        <p class="mt-4 flex items-center justify-center text-sm text-gray-500">
          <i data-lucide="shield" class="mr-1 h-4 w-4 text-green-600"></i>
          100 % anonym und DSGVO‑konform
        </p>
      </div>
    </header>

    <!-- How it works -->
    <section class="bg-gray-50 px-4 py-16">
      <div class="mx-auto max-w-6xl">
        <h2
          class="mb-12 text-center text-3xl font-bold text-gray-900 sm:text-4xl"
        >
          So funktioniert’s
        </h2>

        <div class="grid gap-8 md:grid-cols-3">
          <!-- Step 1 -->
          <div class="text-center">
            <div
              class="mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-800 text-2xl font-bold text-white"
            >
              1
            </div>
            <i data-lucide="globe" class="mx-auto mb-4 h-12 w-12 text-blue-600"></i>
            <h3 class="mb-4 text-xl font-semibold">URL eingeben</h3>
            <p class="text-gray-600">
              Geben Sie einfach die URL Ihrer Website ein – keine Registrierung
              erforderlich.
            </p>
          </div>

          <!-- Step 2 -->
          <div class="text-center">
            <div
              class="mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-800 text-2xl font-bold text-white"
            >
              2
            </div>
            <i data-lucide="settings" class="mx-auto mb-4 h-12 w-12 text-blue-600"></i>
            <h3 class="mb-4 text-xl font-semibold">Automatischer Scan</h3>
            <p class="text-gray-600">
              Unser System prüft Ihre Website in Echtzeit auf über 50
              DSGVO‑Kriterien.
            </p>
          </div>

          <!-- Step 3 -->
          <div class="text-center">
            <div
              class="mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-800 text-2xl font-bold text-white"
            >
              3
            </div>
            <i data-lucide="file-text" class="mx-auto mb-4 h-12 w-12 text-blue-600"></i>
            <h3 class="mb-4 text-xl font-semibold">PDF‑Bericht & Maßnahmen</h3>
            <p class="text-gray-600">
              Erhalten Sie einen detaillierten Bericht mit konkreten
              Handlungsempfehlungen.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Benefits -->
    <section class="px-4 py-16">
      <div class="mx-auto max-w-6xl">
        <h2
          class="mb-12 text-center text-3xl font-bold text-gray-900 sm:text-4xl"
        >
          Warum unser DSGVO‑Audit?
        </h2>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4">
          <!-- Card -->
          <div
            class="rounded border bg-white p-6 text-center shadow-lg ring-1 ring-gray-100
            hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer card-to-top"          
          >
            <div
              class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-red-100"
            >
              <i data-lucide="shield" class="h-6 w-6 text-red-600"></i>
            </div>
            <h3 class="mb-3 text-lg font-semibold">Bußgelder vermeiden</h3>
            <p class="text-sm text-gray-600">
              Sparen Sie sich teure DSGVO‑Bußgelder bis zu 20 Mio. € oder 4 %
              des Jahresumsatzes.
            </p>
          </div>

          <!-- Card -->
          <div
             class="rounded border bg-white p-6 text-center shadow-lg ring-1 ring-gray-100
            hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer card-to-top"
          >
            <div
              class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-green-100"
            >
              <i data-lucide="user-x" class="h-6 w-6 text-green-600"></i>
            </div>
            <h3 class="mb-3 text-lg font-semibold">100 % anonym</h3>
            <p class="text-sm text-gray-600">
              Keine Datenweitergabe, keine Registrierung. Ihr Scan bleibt
              vollständig anonym.
            </p>
          </div>

          <!-- Card -->
          <div
             class="rounded border bg-white p-6 text-center shadow-lg ring-1 ring-gray-100
            hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer card-to-top"
          >
            <div
              class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100"
            >
              <i data-lucide="tag" class="h-6 w-6 text-blue-600"></i>
            </div>
            <h3 class="mb-3 text-lg font-semibold">Rechtskonformes PDF</h3>
            <p class="text-sm text-gray-600">
              Professioneller Bericht für Ihre Unterlagen mit konkreten Empfehlungen. 
            </p>
          </div>

          <!-- Card -->
          <div
             class="rounded border bg-white p-6 text-center shadow-lg ring-1 ring-gray-100
            hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer card-to-top"
          >
            <div
              class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100"
            >
              <i data-lucide="rotate-ccw" class="h-6 w-6 text-purple-600"></i>
            </div>
            <h3 class="mb-3 text-lg font-semibold">Monats‑Abo optional</h3>
            <p class="text-sm text-gray-600">
              Regelmäßige Überwachung Ihrer Website‑Konformität mit
              monatlichen Reports.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="bg-gray-50 px-4 py-16">
      <div class="mx-auto max-w-4xl">
        <h2
          class="mb-4 text-center text-3xl font-bold text-gray-900 sm:text-4xl"
        >
          Wählen Sie Ihr Paket
        </h2>
        <p class="mb-12 text-center text-xl text-gray-600">
          Transparent und fair – keine versteckten Kosten
        </p>

        <div class="grid gap-8 md:grid-cols-2">
          <!-- Einmal‑Audit -->
          <div class="rounded-lg bg-white p-8 shadow-xl ring-1 ring-gray-100
          hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer">
            <div class="mb-8 text-center">
              <h3 class="mb-2 text-2xl font-bold">Einmal‑Audit</h3>
              <div class="mb-1 text-4xl font-bold text-blue-800">29 €</div>
              <p class="text-gray-500">einmalig</p>
            </div>

            <ul class="mb-8 space-y-4">
              <li class="flex items-center">
                <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
                Vollständiger DSGVO‑Scan
              </li>
              <li class="flex items-center">
                <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
                Detaillierter PDF‑Bericht
              </li>
              <li class="flex items-center">
                <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
                Konkrete Handlungsempfehlungen
              </li>
              <li class="flex items-center">
                <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
                Sofortiger Download
              </li>
            </ul>

            <a
            id="einmal-kaufen"
              href="https://buy.stripe.com/6oU8wPbef3bI0ty2kafEk02"
              class="block w-full rounded bg-blue-800 py-3 text-center text-lg font-semibold text-white transition-colors hover:bg-blue-900"
            >
              Jetzt kaufen
            </a>
          </div>

 <!-- Monats-Abo -->
<div class="relative rounded-lg border-2 border-blue-800 bg-white p-8 shadow-xl ring-1 ring-gray-100 hover:scale-105 hover:shadow-2xl transition-all duration-300 cursor-pointer">
    
    <span class="absolute -top-3 left-1/2 -translate-x-1/2 rounded bg-blue-800 px-3 py-1 text-sm font-semibold text-white">Empfohlen</span>

    <div class="mb-8 text-center">
      <h3 class="mb-2 text-2xl font-bold">Monats-Abo</h3>
      <div class="mb-1 text-4xl font-bold text-blue-800">9 €</div>
      <p class="text-gray-500">pro Monat</p>
    </div>

    <ul class="mb-8 space-y-4">
      <li class="flex items-center">
        <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
        Monatliche DSGVO‑Scans
      </li>
      <li class="flex items-center">
        <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
        Änderungs‑Benachrichtigungen
      </li>
      <li class="flex items-center">
        <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
        Verlaufsverfolgung
      </li>
      <li class="flex items-center">
        <i data-lucide="check" class="mr-3 h-5 w-5 text-green-600"></i>
        Jederzeit kündbar
      </li>
    </ul>
    
    <!-- Testbutton -->           
    <button id="testButton" class="bg-green-500 text-white px-4 py-2 rounded mb-4 w-full"> <!-- mb-4 und w-full hinzugefügt für Abstand und Breite -->
      Testmodus
    </button>
    <!-- Testbutton -->

    <a
      id="abo-kaufen"
      href="https://buy.stripe.com/14AeVd5TV7rYeko9MCfEk01"
      target="_blank"
      class="block w-full rounded bg-blue-800 py-3 text-center text-lg font-semibold text-white transition-colors hover:bg-blue-900"
      rel="noopener noreferrer"
    >
      Jetzt kaufen
    </a>
</div>
    </section>

    <!-- Trust -->
    <section class="px-4 py-12">
      <div
        class="mx-auto flex max-w-4xl flex-wrap items-center justify-center gap-8 text-center text-sm font-medium"
      >
        <div class="flex items-center gap-2">
          <i data-lucide="shield" class="h-8 w-8 text-green-600"></i>
          DSGVO‑konform
        </div>
        <div class="flex items-center gap-2">
          <i data-lucide="flag" class="h-8 w-8 text-red-600"></i>
          Made in Germany
        </div>
        <div class="flex items-center gap-2">
          <div class="flex text-yellow-400">
            <i data-lucide="star" class="h-5 w-5 fill-current"></i>
            <i data-lucide="star" class="h-5 w-5 fill-current"></i>
            <i data-lucide="star" class="h-5 w-5 fill-current"></i>
            <i data-lucide="star" class="h-5 w-5 fill-current"></i>
            <i data-lucide="star" class="h-5 w-5"></i>
          </div>
          4,0 / 5 Sterne
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="bg-gray-50 px-4 py-16">
      <div class="mx-auto max-w-4xl">
        <h2
          class="mb-12 text-center text-3xl font-bold text-gray-900 sm:text-4xl"
        >
          Häufige Fragen
        </h2>

        <div
          x-data="{ open: null }"
          class="space-y-4"
        >
          <!-- Item -->
          <div class="rounded border bg-white shadow">
            <button
              @click="open === 1 ? open = null : open = 1"
              class="flex w-full items-center justify-between px-6 py-4 text-left text-lg font-semibold"
            >
              Ist der Scan wirklich anonym?
              <i
                data-lucide="chevron-down"
                class="h-5 w-5 transition-transform"
                :class="{ 'rotate-180': open === 1 }"
              ></i>
            </button>
            <div x-show="open === 1" x-collapse>
              <p class="px-6 pb-4 text-gray-600">
                Ja, absolut. Wir speichern weder Ihre URL noch andere Daten. Der
                Scan läuft vollständig automatisiert und anonym ab. Nach dem
                Scan werden alle temporären Daten sofort gelöscht.
              </p>
            </div>
          </div>

          <!-- Item -->
          <div class="rounded border bg-white shadow">
            <button
              @click="open === 2 ? open = null : open = 2"
              class="flex w-full items-center justify-between px-6 py-4 text-left text-lg font-semibold"
            >
              Brauche ich einen Cookie‑Banner?
              <i
                data-lucide="chevron-down"
                class="h-5 w-5 transition-transform"
                :class="{ 'rotate-180': open === 2 }"
              ></i>
            </button>
            <div x-show="open === 2" x-collapse>
              <p class="px-6 pb-4 text-gray-600">
                Das hängt von Ihrer Website ab. Unser Audit prüft, welche
                Cookies gesetzt werden und ob ein Banner erforderlich ist. Sie
                erhalten eine klare Empfehlung im PDF‑Bericht.
              </p>
            </div>
          </div>

          <!-- Item -->
          <div class="rounded border bg-white shadow">
            <button
              @click="open === 3 ? open = null : open = 3"
              class="flex w-full items-center justify-between px-6 py-4 text-left text-lg font-semibold"
            >
              Kann ich das PDF meinem Anwalt geben?
              <i
                data-lucide="chevron-down"
                class="h-5 w-5 transition-transform"
                :class="{ 'rotate-180': open === 3 }"
              ></i>
            </button>
            <div x-show="open === 3" x-collapse>
              <p class="px-6 pb-4 text-gray-600">
                Auf jeden Fall! Der Bericht ist professionell aufbereitet und
                kann als Grundlage für rechtliche Beratung verwendet werden.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Footer -->
    <section class="bg-blue-800 px-4 py-16 text-white">
      <div class="mx-auto max-w-4xl text-center">
        <h2 class="mb-4 text-3xl font-bold sm:text-4xl">
          Starten Sie jetzt Ihr DSGVO‑Audit
        </h2>
        <p class="mb-8 text-xl text-blue-100">
          In 60 Sekunden wissen Sie, ob Ihre Website rechtssicher ist
        </p>

        <div
          class="mx-auto max-w-2xl rounded-lg bg-white p-6 shadow-lg ring-1 ring-gray-100"
        >
          <div class="flex flex-col gap-4 sm:flex-row">
            <input
              type="url"
              placeholder="https://ihre‑website.de"
              class="flex-1 rounded border-2 border-gray-300 px-4 text-lg leading-tight text-gray-900 focus:border-blue-600 focus:outline-none"
              oninput="document.getElementById('urlInput').value=this.value"
            />
            <button
              onclick="document.getElementById('startAudit').click()"
              class="rounded bg-blue-800 px-8 py-3 text-lg font-semibold text-white transition-colors hover:bg-blue-900"
            >
              Audit starten
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 px-4 py-8 text-center text-sm text-gray-400">
      <div class="mb-6 flex flex-wrap justify-center gap-8 text-gray-300">
        <a
          href="impressum.html"
          class="transition-colors hover:text-white"
          >Impressum</a
        >
        <a href="Datenschutz.html" class="transition-colors hover:text-white">Datenschutz</a>
      </div>
      auditfox.de – Alle Rechte vorbehalten
    </footer>

    <script>
// Lucide Icons
document.addEventListener("DOMContentLoaded", () => {
  lucide.createIcons();
});

// === ELEMENTE AUS DEM HTML HOLEN ===
const startBtn = document.getElementById("startAudit");
const urlInput = document.getElementById("urlInput");
const spinner = document.getElementById("spinner");
const startText = document.getElementById("startText");

const einmalKaufenBtn = document.getElementById("einmal-kaufen");
const aboKaufenBtn = document.getElementById("abo-kaufen");
const testBtn = document.getElementById("testButton");

// === FUNKTIONEN DEFINIEREN ===

function validateUrl(url) {
  try {
    new URL(url);
    if (!url.startsWith('http://') && !url.startsWith('https://')) {
        return false;
    }
    return true;
  } catch {
    return false;
  }
}

function prepareAndScroll(event) {
    event.preventDefault();
    
    let url = urlInput.value.trim();
    if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
        urlInput.value = url;
    }

    if (!validateUrl(url)) {
        alert("Bitte geben Sie eine gültige Website-URL ein (z.B. https://ihre-website.de).");
        return;
    }
    
    startBtn.innerText = "Wählen Sie jetzt Ihr Paket";
    urlInput.disabled = true;
    startBtn.disabled = true;
    document.getElementById("pricing").scrollIntoView({ behavior: "smooth" });
}

function downloadPdf(base64Data, url) {
    try {
        const byteCharacters = atob(base64Data);
        const byteNumbers = new Array(byteCharacters.length);
        for (let i = 0; i < byteCharacters.length; i++) {
            byteNumbers[i] = byteCharacters.charCodeAt(i);
        }
        const byteArray = new Uint8Array(byteNumbers);
        const blob = new Blob([byteArray], {type: 'application/pdf'});

        const link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        const fileName = `Audit-Report-${new URL(url).hostname}.pdf`;
        link.download = fileName;
        link.click();
        window.URL.revokeObjectURL(link.href);
    } catch (e) {
        console.error("Fehler bei der PDF-Dekodierung:", e);
        throw new Error("Konnte die vom Server empfangenen Daten nicht als PDF verarbeiten.");
    }
}


async function executeAudit(event) {
    event.preventDefault(); 
    
    einmalKaufenBtn.style.pointerEvents = 'none';
    aboKaufenBtn.style.pointerEvents = 'none';
    testBtn.disabled = true;

    startText.classList.add("invisible");
    spinner.classList.remove("hidden");
    startBtn.innerText = "Audit läuft...";
    
    const url = urlInput.value;

    try {
        // --- SCHRITT A: AUDIT AUSFÜHREN ---
        const auditResponse = await fetch(`/api/audit?url=${encodeURIComponent(url)}`);
        if (!auditResponse.ok) {
            throw new Error(`Audit-Serverfehler: ${auditResponse.status} ${auditResponse.statusText}`);
        }
        const auditData = await auditResponse.json();
        
        startBtn.innerText = "PDF wird erstellt...";

        // --- SCHRITT B: PDF ERSTELLEN ---
        const pdfResponse = await fetch('/api/create-pdf', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(auditData),
        });

        // *** NEUE, SICHERE PRÜFUNG ***
        if (!pdfResponse.ok) {
            // Wenn der Server einen Fehler meldet (z.B. 500), lesen wir die Fehlernachricht aus
            const errorData = await pdfResponse.json();
            throw new Error(`PDF-Serverfehler: ${errorData.details || 'Unbekannter Fehler'}`);
        }

        // --- SCHRITT C: PDF HERUNTERLADEN (FINALE VERSION) ---
// Wir behandeln die Antwort jetzt direkt als Datei (Blob)
const pdfBlob = await pdfResponse.blob();

if (pdfBlob.type !== 'application/pdf') {
     throw new Error('Der Server hat kein gültiges PDF zurückgegeben.');
}

// Erstellen eines unsichtbaren Download-Links
const link = document.createElement('a');
link.href = window.URL.createObjectURL(pdfBlob);
const fileName = `Audit-Report-${new URL(url).hostname}.pdf`;
link.download = fileName;

// Den Link anklicken, um den Download zu starten
document.body.appendChild(link);
link.click();
document.body.removeChild(link);
window.URL.revokeObjectURL(link.href);

    } catch (error) {
        console.error("Ein Fehler ist aufgetreten:", error);
        alert(`Ein Fehler ist aufgetreten: ${error.message}`);
    } finally {
        // Setzt die UI zurück
        spinner.classList.add("hidden");
        startText.classList.remove("invisible");
        startBtn.innerText = "Jetzt Audit starten";
        urlInput.disabled = false;
        startBtn.disabled = false;
        
        einmalKaufenBtn.style.pointerEvents = 'auto';
        aboKaufenBtn.style.pointerEvents = 'auto';
        testBtn.disabled = false;
    }
}

// === EVENT LISTENERS ZUWEISEN ===
startBtn.addEventListener("click", prepareAndScroll);
einmalKaufenBtn.addEventListener("click", executeAudit);
aboKaufenBtn.addEventListener("click", executeAudit);
testBtn.addEventListener("click", executeAudit);
// === SCROLL-TO-TOP FÜR KARTEN ===
const cardsToTop = document.querySelectorAll('.card-to-top');
const headerSection = document.querySelector('header');

cardsToTop.forEach(card => {
  card.addEventListener('click', () => {
    if (headerSection) {
      headerSection.scrollIntoView({ behavior: 'smooth' });
    }
  });
});
</script>
  </body>
</html>
